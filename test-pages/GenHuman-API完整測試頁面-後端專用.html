<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenHuman API å®Œæ•´æ¸¬è©¦é é¢ - å¾Œç«¯å°ˆç”¨</title>
    <link rel="stylesheet" href="/static/css/output.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .test-section { background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .json-viewer { font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; }
        .status-success { color: #10b981; }
        .status-error { color: #ef4444; }
        .status-processing { color: #f59e0b; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .btn-success { background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); }
        .btn-warning { background: linear-gradient(135deg, #fb923c 0%, #f97316 100%); }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- æ¨™é¡Œå€åŸŸ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                <i class="fas fa-flask text-purple-600 mr-3"></i>
                GenHuman API å®Œæ•´æ¸¬è©¦é é¢
            </h1>
            <p class="text-xl text-gray-600 mb-4">åŸºæ–¼å‰ç«¯æˆåŠŸç¶“é©—ï¼Œç‚ºå¾Œç«¯æä¾›çš„å®Œæ•´APIæ¸¬è©¦å·¥å…·</p>
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-4xl mx-auto">
                <h3 class="font-semibold text-blue-900 mb-2">ğŸ“‹ æˆåŠŸå·¥ä½œæµç¨‹ï¼ˆå‰ç«¯é©—è­‰ï¼‰ï¼š</h3>
                <div class="text-blue-800 text-sm">
                    <span class="font-medium">1. å…è²»è²éŸ³å…‹éš†</span> â†’ æ‹¿åˆ°voice_id â†’ 
                    <span class="font-medium">2. ä»˜è²»è²éŸ³åˆæˆ</span> â†’ æ‹¿åˆ°éŸ³é »URL â†’ 
                    <span class="font-medium">3. å…è²»æ•¸å­—äººå…‹éš†</span> â†’ æ‹¿åˆ°digital_human_id â†’ 
                    <span class="font-medium">4. æ•¸å­—äººéŸ³é »URL + æ•¸å­—äººå…‹éš†ID = ä»˜è²»æ•¸å­—äººåˆæˆ</span> â†’ å®Œæˆ
                </div>
            </div>
        </div>

        <!-- APIåŸºç¤ä¿¡æ¯ -->
        <div class="test-section p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                APIåŸºç¤é…ç½®
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">APIåŸºç¤åœ°å€ï¼š</label>
                    <input type="text" id="apiBase" value="https://api.yidevs.com" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50" readonly>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">èªè­‰Tokenï¼š</label>
                    <input type="password" id="apiToken" 
                           value="08D7EE7F91D258F27B4ADDF59CDDDEDE.1E95F76130BA23D37CE7BBBD69B19CCF.KYBVDWNR"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                </div>
            </div>
        </div>

        <!-- æ­¥é©Ÿä¸€ï¼šå…è²»è²éŸ³å…‹éš† -->
        <div class="test-section p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-lg mr-3">æ­¥é©Ÿ 1</span>
                <i class="fas fa-microphone text-green-600 mr-2"></i>
                å…è²»è²éŸ³å…‹éš†
            </h2>
            
            <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                <p class="text-green-800 font-medium">
                    ğŸ¯ ç›®æ¨™ï¼šä¸Šå‚³éŸ³é »æ–‡ä»¶ï¼Œç²å¾—voice_idç”¨æ–¼å¾ŒçºŒè²éŸ³åˆæˆ
                </p>
                <p class="text-green-700 text-sm mt-1">
                    ğŸ“‹ ç«¯é»ï¼šPOST /app/human/human/Voice/clone
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">è«‹æ±‚åƒæ•¸</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">è²éŸ³åç¨±ï¼š</label>
                            <input type="text" id="voiceName" value="æ¸¬è©¦è²éŸ³_Andy" 
                                   placeholder="ä¾‹å¦‚ï¼šå¼µå°æ˜çš„è²éŸ³"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">éŸ³é »URLï¼š</label>
                            <input type="url" id="voiceUrl" 
                                   placeholder="https://example.com/audio.mp3"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æè¿°ï¼š</label>
                            <input type="text" id="voiceDesc" value="ç”·è²ï¼Œæ¸…æ™°æ¨™æº–" 
                                   placeholder="è²éŸ³ç‰¹å¾µæè¿°"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                        </div>
                    </div>
                    
                    <button onclick="testVoiceClone()" 
                            class="btn-success text-white px-6 py-3 rounded-lg font-medium mt-4 w-full hover:opacity-90 transition-opacity">
                        <i class="fas fa-play mr-2"></i>
                        é–‹å§‹è²éŸ³å…‹éš†
                    </button>
                </div>
                
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">éŸ¿æ‡‰çµæœ</h3>
                    <div id="voiceResult" class="bg-gray-900 text-gray-100 rounded-lg p-4 h-64 overflow-y-auto json-viewer">
                        <pre>ç­‰å¾…APIæ¸¬è©¦çµæœ...</pre>
                    </div>
                    
                    <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                        <p class="text-sm text-blue-800">
                            <i class="fas fa-lightbulb mr-1"></i>
                            <strong>ç²å¾—çš„voice_idå°‡ç”¨æ–¼æ­¥é©Ÿ2</strong>
                        </p>
                        <div id="extractedVoiceId" class="mt-2 font-mono text-sm text-blue-900"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ­¥é©ŸäºŒï¼šä»˜è²»è²éŸ³åˆæˆ -->
        <div class="test-section p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-lg mr-3">æ­¥é©Ÿ 2</span>
                <i class="fas fa-volume-up text-blue-600 mr-2"></i>
                ä»˜è²»è²éŸ³åˆæˆ
            </h2>
            
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                <p class="text-blue-800 font-medium">
                    ğŸ¯ ç›®æ¨™ï¼šä½¿ç”¨voice_idåˆæˆæ–‡å­—ç‚ºèªéŸ³ï¼Œç²å¾—éŸ³é »URLç”¨æ–¼æ•¸å­—äººåˆæˆ
                </p>
                <p class="text-blue-700 text-sm mt-1">
                    ğŸ“‹ ç«¯é»ï¼šPOST /app/human/human/Voice/synthesis
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">è«‹æ±‚åƒæ•¸</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Voice IDï¼ˆå¾æ­¥é©Ÿ1ç²å¾—ï¼‰ï¼š</label>
                            <input type="text" id="synthesisVoiceId" 
                                   placeholder="å¾æ­¥é©Ÿ1è¤‡è£½voice_id"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">åˆæˆæ–‡å­—ï¼š</label>
                            <textarea id="synthesisText" rows="3"
                                      placeholder="è«‹è¼¸å…¥è¦åˆæˆç‚ºèªéŸ³çš„æ–‡å­—"
                                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ•¸å­—äººåŠ©æ‰‹ï¼Œå¾ˆé«˜èˆˆç‚ºæ‚¨æœå‹™ã€‚</textarea>
                        </div>
                    </div>
                    
                    <button onclick="testVoiceSynthesis()" 
                            class="btn-primary text-white px-6 py-3 rounded-lg font-medium mt-4 w-full hover:opacity-90 transition-opacity">
                        <i class="fas fa-magic mr-2"></i>
                        é–‹å§‹è²éŸ³åˆæˆ
                    </button>
                </div>
                
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">éŸ¿æ‡‰çµæœ</h3>
                    <div id="synthesisResult" class="bg-gray-900 text-gray-100 rounded-lg p-4 h-64 overflow-y-auto json-viewer">
                        <pre>ç­‰å¾…APIæ¸¬è©¦çµæœ...</pre>
                    </div>
                    
                    <div class="mt-4 p-3 bg-orange-50 rounded-lg">
                        <p class="text-sm text-orange-800">
                            <i class="fas fa-lightbulb mr-1"></i>
                            <strong>ç²å¾—çš„éŸ³é »URLå°‡ç”¨æ–¼æ­¥é©Ÿ4</strong>
                        </p>
                        <div id="extractedAudioUrl" class="mt-2 font-mono text-sm text-orange-900"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ­¥é©Ÿä¸‰ï¼šå…è²»æ•¸å­—äººå…‹éš† -->
        <div class="test-section p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-lg mr-3">æ­¥é©Ÿ 3</span>
                <i class="fas fa-user-tie text-purple-600 mr-2"></i>
                å…è²»æ•¸å­—äººå…‹éš†
            </h2>
            
            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6">
                <p class="text-purple-800 font-medium">
                    ğŸ¯ ç›®æ¨™ï¼šä¸Šå‚³äººç‰©ç…§ç‰‡ï¼Œç²å¾—digital_human_idç”¨æ–¼æ•¸å­—äººåˆæˆ
                </p>
                <p class="text-purple-700 text-sm mt-1">
                    ğŸ“‹ ç«¯é»ï¼šPOST /app/human/human/Index/humanClone
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">è«‹æ±‚åƒæ•¸</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">è§’è‰²åç¨±ï¼š</label>
                            <input type="text" id="humanName" value="Andyè€å¸«" 
                                   placeholder="ä¾‹å¦‚ï¼šæè€å¸«"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ç…§ç‰‡URLï¼š</label>
                            <input type="url" id="humanImageUrl" 
                                   placeholder="https://example.com/photo.jpg"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                        </div>
                    </div>
                    
                    <button onclick="testHumanClone()" 
                            class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium mt-4 w-full transition-colors">
                        <i class="fas fa-clone mr-2"></i>
                        é–‹å§‹æ•¸å­—äººå…‹éš†
                    </button>
                </div>
                
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">éŸ¿æ‡‰çµæœ</h3>
                    <div id="humanResult" class="bg-gray-900 text-gray-100 rounded-lg p-4 h-64 overflow-y-auto json-viewer">
                        <pre>ç­‰å¾…APIæ¸¬è©¦çµæœ...</pre>
                    </div>
                    
                    <div class="mt-4 p-3 bg-green-50 rounded-lg">
                        <p class="text-sm text-green-800">
                            <i class="fas fa-lightbulb mr-1"></i>
                            <strong>ç²å¾—çš„digital_human_idå°‡ç”¨æ–¼æ­¥é©Ÿ4</strong>
                        </p>
                        <div id="extractedHumanId" class="mt-2 font-mono text-sm text-green-900"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ­¥é©Ÿå››ï¼šä»˜è²»æ•¸å­—äººåˆæˆ -->
        <div class="test-section p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-lg mr-3">æ­¥é©Ÿ 4</span>
                <i class="fas fa-video text-red-600 mr-2"></i>
                ä»˜è²»æ•¸å­—äººåˆæˆï¼ˆæœ€çµ‚æ­¥é©Ÿï¼‰
            </h2>
            
            <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                <p class="text-red-800 font-medium">
                    ğŸ¯ ç›®æ¨™ï¼šçµåˆéŸ³é »URLå’Œdigital_human_idï¼Œç”Ÿæˆæœ€çµ‚çš„æ•¸å­—äººè¦–é »
                </p>
                <p class="text-red-700 text-sm mt-1">
                    ğŸ“‹ ç«¯é»ï¼šPOST /app/human/human/Index/created
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">è«‹æ±‚åƒæ•¸</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å›èª¿åœ°å€ï¼š</label>
                            <input type="url" id="callbackUrl" 
                                   value="https://your-domain.com/callback"
                                   placeholder="https://your-domain.com/callback"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å ´æ™¯ä»»å‹™IDï¼ˆå¾æ­¥é©Ÿ3ç²å¾—ï¼‰ï¼š</label>
                            <input type="text" id="sceneTaskId" 
                                   placeholder="å¾æ­¥é©Ÿ3è¤‡è£½digital_human_id"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">éŸ³é »åœ°å€ï¼ˆå¾æ­¥é©Ÿ2ç²å¾—ï¼‰ï¼š</label>
                            <input type="url" id="audioAddress" 
                                   placeholder="å¾æ­¥é©Ÿ2è¤‡è£½éŸ³é »URL"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500">
                        </div>
                    </div>
                    
                    <button onclick="testDigitalHumanSynthesis()" 
                            class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium mt-4 w-full transition-colors">
                        <i class="fas fa-rocket mr-2"></i>
                        ç”Ÿæˆæ•¸å­—äººè¦–é »
                    </button>
                </div>
                
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">éŸ¿æ‡‰çµæœ</h3>
                    <div id="finalResult" class="bg-gray-900 text-gray-100 rounded-lg p-4 h-64 overflow-y-auto json-viewer">
                        <pre>ç­‰å¾…APIæ¸¬è©¦çµæœ...</pre>
                    </div>
                    
                    <div class="mt-4 p-3 bg-yellow-50 rounded-lg">
                        <p class="text-sm text-yellow-800">
                            <i class="fas fa-clock mr-1"></i>
                            <strong>ä»»å‹™æäº¤æˆåŠŸå¾Œï¼Œéœ€è¦æŸ¥è©¢ä»»å‹™ç‹€æ…‹ç²å¾—æœ€çµ‚è¦–é »</strong>
                        </p>
                        <div id="extractedTaskId" class="mt-2 font-mono text-sm text-yellow-900"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä»»å‹™ç‹€æ…‹æŸ¥è©¢ -->
        <div class="test-section p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-search text-gray-600 mr-2"></i>
                ä»»å‹™ç‹€æ…‹æŸ¥è©¢
            </h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ä»»å‹™IDï¼š</label>
                            <input type="text" id="queryTaskId" 
                                   placeholder="å¾æ­¥é©Ÿ4è¤‡è£½video_task_id"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500">
                        </div>
                    </div>
                    
                    <button onclick="queryTaskStatus()" 
                            class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium mt-4 w-full transition-colors">
                        <i class="fas fa-search mr-2"></i>
                        æŸ¥è©¢ä»»å‹™ç‹€æ…‹
                    </button>
                </div>
                
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">æŸ¥è©¢çµæœ</h3>
                    <div id="queryResult" class="bg-gray-900 text-gray-100 rounded-lg p-4 h-64 overflow-y-auto json-viewer">
                        <pre>ç­‰å¾…æŸ¥è©¢çµæœ...</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ“ä½œæ—¥å¿— -->
        <div class="test-section p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-list text-gray-600 mr-2"></i>
                æ“ä½œæ—¥èªŒ
            </h2>
            
            <div class="flex justify-between items-center mb-4">
                <p class="text-gray-600">å¯¦æ™‚è¨˜éŒ„æ‰€æœ‰APIèª¿ç”¨å’ŒéŸ¿æ‡‰</p>
                <button onclick="clearLogs()" 
                        class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                    <i class="fas fa-trash mr-1"></i>
                    æ¸…ç©ºæ—¥èªŒ
                </button>
            </div>
            
            <div id="operationLog" class="bg-gray-900 text-gray-100 rounded-lg p-4 h-80 overflow-y-auto json-viewer">
                <pre id="logContent">ğŸ“‹ æ“ä½œæ—¥èªŒå°‡åœ¨é€™è£¡é¡¯ç¤º...</pre>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€é…ç½®
        const API_CONFIG = {
            base: 'https://api.yidevs.com',
            token: '08D7EE7F91D258F27B4ADDF59CDDDEDE.1E95F76130BA23D37CE7BBBD69B19CCF.KYBVDWNR'
        };

        // å­˜å„²ä¸­é–“çµæœ
        let workflowData = {
            voiceId: null,
            audioUrl: null,
            digitalHumanId: null,
            taskId: null
        };

        // æ—¥èªŒåŠŸèƒ½
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}\n`;
            
            const logElement = document.getElementById('logContent');
            logElement.textContent += logEntry;
            document.getElementById('operationLog').scrollTop = document.getElementById('operationLog').scrollHeight;
            
            console.log(`[GenHuman API Test] ${message}`);
        }

        function clearLogs() {
            document.getElementById('logContent').textContent = 'ğŸ“‹ æ“ä½œæ—¥èªŒå·²æ¸…ç©º...\n';
        }

        // é€šç”¨APIèª¿ç”¨å‡½æ•¸
        async function callGenHumanAPI(endpoint, data, method = 'POST') {
            const url = API_CONFIG.base + endpoint;
            const token = document.getElementById('apiToken').value || API_CONFIG.token;
            
            log(`ğŸš€ èª¿ç”¨API: ${method} ${endpoint}`);
            log(`ğŸ“Š è«‹æ±‚æ•¸æ“š: ${JSON.stringify(data, null, 2)}`);
            
            try {
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        token: token,
                        ...data
                    })
                });
                
                const result = await response.json();
                log(`ğŸ“¥ APIéŸ¿æ‡‰ (${response.status}): ${JSON.stringify(result, null, 2)}`);
                
                return {
                    success: response.ok && result.code === 200,
                    data: result,
                    status: response.status
                };
            } catch (error) {
                log(`âŒ APIèª¿ç”¨å¤±æ•—: ${error.message}`);
                return {
                    success: false,
                    error: error.message
                };
            }
        }

        // æ­¥é©Ÿ1ï¼šå…è²»è²éŸ³å…‹éš†
        async function testVoiceClone() {
            const voiceName = document.getElementById('voiceName').value;
            const voiceUrl = document.getElementById('voiceUrl').value;
            const voiceDesc = document.getElementById('voiceDesc').value;
            
            if (!voiceName || !voiceUrl) {
                alert('è«‹å¡«å¯«è²éŸ³åç¨±å’ŒéŸ³é »URLï¼');
                return;
            }
            
            log(`ğŸ¤ æ­¥é©Ÿ1ï¼šé–‹å§‹å…è²»è²éŸ³å…‹éš†`);
            
            const response = await callGenHumanAPI('/app/human/human/Voice/clone', {
                voice_name: voiceName,
                voice_url: voiceUrl,
                describe: voiceDesc
            });
            
            const resultElement = document.getElementById('voiceResult');
            const extractElement = document.getElementById('extractedVoiceId');
            
            if (response.success && response.data.code === 200) {
                const voiceId = response.data.data.voice_id;
                workflowData.voiceId = voiceId;
                
                // è‡ªå‹•å¡«å…¥åˆ°æ­¥é©Ÿ2
                document.getElementById('synthesisVoiceId').value = voiceId;
                
                log(`âœ… è²éŸ³å…‹éš†æˆåŠŸï¼Voice ID: ${voiceId}`);
                extractElement.innerHTML = `Voice ID: <span class="font-bold text-green-600">${voiceId}</span>`;
                
                resultElement.innerHTML = `<pre class="status-success">${JSON.stringify(response.data, null, 2)}</pre>`;
            } else {
                log(`âŒ è²éŸ³å…‹éš†å¤±æ•—: ${JSON.stringify(response.data || response.error)}`);
                resultElement.innerHTML = `<pre class="status-error">${JSON.stringify(response.data || response.error, null, 2)}</pre>`;
            }
        }

        // æ­¥é©Ÿ2ï¼šä»˜è²»è²éŸ³åˆæˆ
        async function testVoiceSynthesis() {
            const voiceId = document.getElementById('synthesisVoiceId').value;
            const text = document.getElementById('synthesisText').value;
            
            if (!voiceId || !text) {
                alert('è«‹å¡«å¯«Voice IDå’Œåˆæˆæ–‡å­—ï¼');
                return;
            }
            
            log(`ğŸ”Š æ­¥é©Ÿ2ï¼šé–‹å§‹ä»˜è²»è²éŸ³åˆæˆ`);
            
            const response = await callGenHumanAPI('/app/human/human/Voice/synthesis', {
                voice_id: voiceId,
                text: text
            });
            
            const resultElement = document.getElementById('synthesisResult');
            const extractElement = document.getElementById('extractedAudioUrl');
            
            if (response.success && response.data.code === 200) {
                const audioUrl = response.data.data.audio_url;
                workflowData.audioUrl = audioUrl;
                
                // è‡ªå‹•å¡«å…¥åˆ°æ­¥é©Ÿ4
                document.getElementById('audioAddress').value = audioUrl;
                
                log(`âœ… è²éŸ³åˆæˆæˆåŠŸï¼Audio URL: ${audioUrl}`);
                extractElement.innerHTML = `Audio URL: <span class="font-bold text-blue-600">${audioUrl}</span>`;
                
                resultElement.innerHTML = `<pre class="status-success">${JSON.stringify(response.data, null, 2)}</pre>`;
            } else {
                log(`âŒ è²éŸ³åˆæˆå¤±æ•—: ${JSON.stringify(response.data || response.error)}`);
                resultElement.innerHTML = `<pre class="status-error">${JSON.stringify(response.data || response.error, null, 2)}</pre>`;
            }
        }

        // æ­¥é©Ÿ3ï¼šå…è²»æ•¸å­—äººå…‹éš†
        async function testHumanClone() {
            const humanName = document.getElementById('humanName').value;
            const imageUrl = document.getElementById('humanImageUrl').value;
            
            if (!humanName || !imageUrl) {
                alert('è«‹å¡«å¯«è§’è‰²åç¨±å’Œç…§ç‰‡URLï¼');
                return;
            }
            
            log(`ğŸ‘¤ æ­¥é©Ÿ3ï¼šé–‹å§‹å…è²»æ•¸å­—äººå…‹éš†`);
            
            const response = await callGenHumanAPI('/app/human/human/Index/humanClone', {
                character_name: humanName,
                image_url: imageUrl
            });
            
            const resultElement = document.getElementById('humanResult');
            const extractElement = document.getElementById('extractedHumanId');
            
            if (response.success && response.data.code === 200) {
                const humanId = response.data.data.digital_human_id;
                workflowData.digitalHumanId = humanId;
                
                // è‡ªå‹•å¡«å…¥åˆ°æ­¥é©Ÿ4
                document.getElementById('sceneTaskId').value = humanId;
                
                log(`âœ… æ•¸å­—äººå…‹éš†æˆåŠŸï¼Digital Human ID: ${humanId}`);
                extractElement.innerHTML = `Digital Human ID: <span class="font-bold text-purple-600">${humanId}</span>`;
                
                resultElement.innerHTML = `<pre class="status-success">${JSON.stringify(response.data, null, 2)}</pre>`;
            } else {
                log(`âŒ æ•¸å­—äººå…‹éš†å¤±æ•—: ${JSON.stringify(response.data || response.error)}`);
                resultElement.innerHTML = `<pre class="status-error">${JSON.stringify(response.data || response.error, null, 2)}</pre>`;
            }
        }

        // æ­¥é©Ÿ4ï¼šä»˜è²»æ•¸å­—äººåˆæˆ
        async function testDigitalHumanSynthesis() {
            const callbackUrl = document.getElementById('callbackUrl').value;
            const sceneTaskId = document.getElementById('sceneTaskId').value;
            const audioAddress = document.getElementById('audioAddress').value;
            
            if (!callbackUrl || !sceneTaskId || !audioAddress) {
                alert('è«‹å¡«å¯«æ‰€æœ‰å¿…è¦åƒæ•¸ï¼');
                return;
            }
            
            log(`ğŸ¬ æ­¥é©Ÿ4ï¼šé–‹å§‹ä»˜è²»æ•¸å­—äººåˆæˆ`);
            
            const response = await callGenHumanAPI('/app/human/human/Index/created', {
                callback_url: callbackUrl,
                scene_task_id: sceneTaskId,
                audio_address: audioAddress
            });
            
            const resultElement = document.getElementById('finalResult');
            const extractElement = document.getElementById('extractedTaskId');
            
            if (response.success && response.data.code === 200) {
                const taskId = response.data.data.video_task_id;
                workflowData.taskId = taskId;
                
                // è‡ªå‹•å¡«å…¥åˆ°æŸ¥è©¢å€åŸŸ
                document.getElementById('queryTaskId').value = taskId;
                
                log(`âœ… æ•¸å­—äººåˆæˆä»»å‹™æäº¤æˆåŠŸï¼Task ID: ${taskId}`);
                extractElement.innerHTML = `Video Task ID: <span class="font-bold text-red-600">${taskId}</span>`;
                
                resultElement.innerHTML = `<pre class="status-success">${JSON.stringify(response.data, null, 2)}</pre>`;
                
                // æç¤ºæŸ¥è©¢ç‹€æ…‹
                setTimeout(() => {
                    if (confirm('æ•¸å­—äººåˆæˆä»»å‹™å·²æäº¤ï¼æ˜¯å¦ç«‹å³æŸ¥è©¢ä»»å‹™ç‹€æ…‹ï¼Ÿ')) {
                        queryTaskStatus();
                    }
                }, 2000);
            } else {
                log(`âŒ æ•¸å­—äººåˆæˆå¤±æ•—: ${JSON.stringify(response.data || response.error)}`);
                resultElement.innerHTML = `<pre class="status-error">${JSON.stringify(response.data || response.error, null, 2)}</pre>`;
            }
        }

        // ä»»å‹™ç‹€æ…‹æŸ¥è©¢
        async function queryTaskStatus() {
            const taskId = document.getElementById('queryTaskId').value;
            
            if (!taskId) {
                alert('è«‹å¡«å¯«ä»»å‹™IDï¼');
                return;
            }
            
            log(`ğŸ” æŸ¥è©¢ä»»å‹™ç‹€æ…‹: ${taskId}`);
            
            const response = await callGenHumanAPI('/app/human/human/Musetalk/task', {
                task_id: taskId
            }, 'GET');
            
            const resultElement = document.getElementById('queryResult');
            
            if (response.success && response.data.code === 200) {
                const taskData = response.data.data;
                const status = taskData.state;
                
                let statusText = '';
                switch(status) {
                    case 10: statusText = 'è™•ç†ä¸­'; break;
                    case 20: statusText = 'å·²å®Œæˆ'; break;
                    case 30: statusText = 'å¤±æ•—'; break;
                    default: statusText = 'æœªçŸ¥ç‹€æ…‹';
                }
                
                log(`ğŸ“Š ä»»å‹™ç‹€æ…‹: ${statusText} (${status})`);
                
                if (status === 20 && taskData.videoUrl) {
                    log(`ğŸ‰ ä»»å‹™å®Œæˆï¼è¦–é »URL: ${taskData.videoUrl}`);
                    resultElement.innerHTML = `<pre class="status-success">${JSON.stringify(response.data, null, 2)}</pre>`;
                } else if (status === 30) {
                    log(`âŒ ä»»å‹™å¤±æ•—`);
                    resultElement.innerHTML = `<pre class="status-error">${JSON.stringify(response.data, null, 2)}</pre>`;
                } else {
                    log(`â³ ä»»å‹™ä»åœ¨è™•ç†ä¸­ï¼Œè«‹ç¨å¾Œå†æŸ¥è©¢`);
                    resultElement.innerHTML = `<pre class="status-processing">${JSON.stringify(response.data, null, 2)}</pre>`;
                }
            } else {
                log(`âŒ æŸ¥è©¢å¤±æ•—: ${JSON.stringify(response.data || response.error)}`);
                resultElement.innerHTML = `<pre class="status-error">${JSON.stringify(response.data || response.error, null, 2)}</pre>`;
            }
        }

        // é é¢è¼‰å…¥å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸš€ GenHuman API æ¸¬è©¦é é¢å·²è¼‰å…¥');
            log('ğŸ“‹ è«‹æŒ‰ç…§æ­¥é©Ÿ1â†’2â†’3â†’4çš„é †åºé€²è¡Œæ¸¬è©¦');
            log('ğŸ’¡ æ¯å€‹æ­¥é©Ÿçš„çµæœæœƒè‡ªå‹•å¡«å…¥åˆ°ä¸‹å€‹æ­¥é©Ÿ');
        });
    </script>
</body>
</html>
